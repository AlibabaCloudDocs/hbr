# 恢复SAP HANA {#concept_kjd_p1k_ggb .concept}

您可以使用混合云备份服务（HBR）来备份ECS实例中部署的SAP HANA数据库，并在需要时恢复。本文主要为您介绍如何恢复SAP HANA的数据库。

**说明：** 恢复SAP HANA数据库期间，混合云备份会自动为您停止数据库。因此，在恢复期间， 数据库无法访问。

## 操作步骤 {#section_wbp_t3s_ggb .section}

1.  登录[混合云备份管理控制台](https://hbr.console.aliyun.com)。
2.  在左侧导航栏，选择**ECS备份** \> **SAP HANA备份**。
3.  单击**SAP HANA实例**页签。
4.  找到需要恢复的SAP HANA实例，在其右侧的操作列表中，单击**恢复**。
5.  在弹出的新建恢复计划页面，会显示SAP HANA实例（数据源）的信息，单击**下一步**。
6.  选择需要还原的数据库。如果数据库是SYSTEMDB（系统数据库），还需选择该SAP HANA的主节点。单击**下一步**。
7.  根据业务需要选择**恢复方式**以及其配置。具体说明如下：

    |恢复方式|说明|相应参数|
    |:---|:-|:---|
    |最近时间|将数据库恢复到已备份的最近可用状态|     -   **使用差异备份**：如果您需要使用差异备份或增量备份来还原数据库，开启此项。如果您不选择开启此项，只会使用日志备份进行恢复。
    -   **初始化日志区域**：开启此选项后，该日志区域会被初始化，您无法再使用该日志区域中的日志条目。如果需要，您可以使用日志备份中的日志条目。您可以在日志区域无法使用时启用此项，或将数据库还原到一个不同的系统时启用此项。
    -   **检查差异和日志备份可用性**：开启此项后，在恢复开始时，系统会检查所需的差异备份和日志备份是否都可用。 如果缺少差异备份或日志备份，在更改数据之前会停止恢复。
 |
    |指定时间|将数据库恢复到特定时间点|     -   **使用差异备份**：如果您需要使用差异备份或增量备份来还原数据库，开启此项。如果您不选择开启此项，只会使用日志备份进行恢复。
    -   **初始化日志区域**：开启此选项后，该日志区域会被初始化，您无法再使用该日志区域中的日志条目。如果需要，您可以使用日志备份中的日志条目。您可以在日志区域无法使用时启用此项，或将数据库还原到一个不同的系统时启用此项。
    -   **检查差异和日志备份的可用性**：开启此项后，在恢复开始时，系统会检查所需的差异备份和日志备份是否都可用。 如果缺少差异备份或日志备份，在更改数据之前会停止恢复。
    -   **恢复到这个时间**：选择需要恢复到的时间点。系统会将数据库恢复到离这个时间最近的状态。
 |
    |指定备份|将数据库恢复到指定的数据库备份|     -   **是否使用Catalog**：是否从Catalog中查找备份。
    -   **备份前缀**：如果不使用Catalog，需要用户指定一个备份前缀，混合云备份服务会根据备份前缀进行恢复。
 |
    |Log位置|将数据库还原到指定日志位置。|     -   **使用差异备份**：如果您需要使用差异备份或增量备份来还原数据库，开启此项。如果您不选择开启此项，只会使用日志备份进行恢复。
    -   **初始化日志区域**：开启此选项后，该日志区域会被初始化，您无法再使用该日志区域中的日志条目。如果需要，您可以使用日志备份中的日志条目。您可以在日志区域无法使用时启用此项，或将数据库还原到一个不同的系统时启用此项。
    -   **检查差异和日志备份可用性**：开启此项后，在恢复开始时，系统会检查所需的差异备份和日志备份是否都可用。 如果缺少差异备份或日志备份，在更改数据之前会停止恢复。
    -   **日志位置**：要恢复到的日志位置。
    -   **Volume ID**：要恢复的Volume。
 |

8.  单击**下一步**。
9.  选择一个备份版本作为恢复参考，单击**创建**。

## 相关操作 {#section_clt_1by_ggb .section}

您可以查看恢复任务的状态，并可以取消正在执行的恢复任务。具体操作如下：

1.  登录[混合云备份管理控制台](https://hbr.console.aliyun.com)。
2.  在左侧导航栏，选择**ECS备份** \> **SAP HANA备份**。
3.  单击**恢复任务**页签。
4.  在恢复任务列表中查看恢复任务的状态。
5.  如需取消正在进行中的恢复任务，在恢复任务右侧，单击**取消**。

