# OSS备份

您可以使用混合云备份HBR来保护阿里云对象存储OSS的数据，并可以在数据丢失或受损时及时恢复。

已创建标准或低频访问存储类型的存储空间（Bucket）。具体操作，请参见[创建存储空间](/intl.zh-CN/控制台用户指南/存储空间管理/创建存储空间.md)。

## 背景信息

使用HBR来保护OSS数据时，有如下注意事项：

-   目前HBR不支持备份和恢复归档存储类型的Bucket、软链接（symlink）以及Object读写权限（ACL）。
-   低频存储类型的Bucket会产生较高的访问费用。
-   备份OSS将产生OSS请求费用，该费用由OSS收取。详情请参见[计量计费概述](/intl.zh-CN/计量计费/计量项和计费项/概述.md)。
-   通过备份历史删除早期的备份版本时，不会影响其他备份版本数据的完整性。

## 步骤一：创建备份计划

您可以按如下步骤创建备份计划。

1.  登录[混合云备份管理控制台](https://hbr.console.aliyun.com)。

2.  在左侧导航栏，选择**备份** \> **OSS备份**。

3.  在备份计划页签，单击**备份Bucket**。

4.  在创建备份计划面板，按照以下说明填写各项参数，然后单击**确定**。

    **说明：** 您可以享受免费备份计划，计划到期日期为创建备份计划之日起1个月内，假设您于2020年2月14日创建备份计划，则您可享受的免费备份计划到期日期为2020年3月14日。

    ![backup plan](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1408352261/p279265.png)

    1.  按以下说明填写基础设置中涉及的各项参数。

        |参数|说明|
        |--|--|
        |备份OSS Bucket|从下拉框中选择待备份的OSS Bucket名称。|
        |备份计划名称|为该备份计划命名。可不填，默认名字随机分配。|
        |备份起始时间|选择备份开始执行的时间。时间精确到秒。|
        |到期付费续用|免费备份计划到期后，是否执行到期付费续用。        -   否（默认值）：免费备份计划到期后，不进行续费。您的备份计划将被删除。
        -   是：免费备份计划到期后，自动续费。 |

    2.  单击**立即转为付费使用**，启用高级设置，并按以下说明填写各项参数。

        |参数|说明|
        |--|--|
        |备份执行间隔|选择增量备份的频率。时间单位：天、周。|
        |备份保留策略|您可以选择**指定保留时间**或**永久**保留备份。 如果您选择**指定保留时间**来保留备份，则需要指定**备份保留时间**，当前备份保留时间支持的单位为：天、周、月、年。 |
        |备份保留时间|选择保留该备份的时间。时间单位：天、周、月、年。|
        |备份库配置|您可以选择**创建新备份库**或**选择已有备份库**。         -   **创建新备份库**：为新建备份库命名。可不填，默认名字随机分配。
        -   **选择已有备份库**：从备份库名称下拉框中选择已有备份库。 |
        |备份库名称|指定备份库的名称。|

        备份计划创建完成后，将按照指定的备份起始时间、备份执行间隔进行OSS备份任务。您还可以在备份计划页签进行如下相关操作：

        -   单击操作下的**立即执行**，开始执行备份任务。
        -   单击操作下的**更多** \> **暂停计划**，暂停执行中的备份任务。如需再次启动备份任务，单击操作下的**更多** \> **继续计划**。
        -   单击操作下的**更多** \> **删除计划**，删除执行中的备份任务。备份计划删除后，该备份计划不会继续执行，但仍保留已备份的数据。

## 步骤二：创建恢复任务

您可以将指定的备份源OSS Bucket中的备份数据恢复到源Bucket或指定的其他Bucket中。

1.  在恢复任务页签，右上角单击**创建恢复任务**。

2.  在新建恢复任务面板，选择**备份库**、**已备份的Bucket**，选择一个可以用来恢复的备份，单击**下一步**。

    ![OSS-创建恢复任务](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9774555261/p291798.png)

3.  在选择恢复文件页签，配置**恢复规则**。

    ![恢复规则](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4201129951/p59956.jpg)

    恢复规则包含以下三项：

    -   **包含所有文件**：将恢复所选Bucket下的所有文件。
    -   **包含下列文件**或**排除下列文件**，在输入文件列表框中手动填写文件列表，将按照规则恢复所选Bucket下指定的文件。
    文件列表每行填写一个路径，且每一行只能以备份时指定的prefix开头。

    -   备份时prefix指定a/b/, 要包含（或排除）folder和file.txt，需输入：

        ```
        a/b/folder
        a/b/file.txt
        ```

    -   备份时不指定prefix, 要包含（或排除）folder和file.txt，需输入：

        ```
        folder
        file.txt
        ```

4.  在配置恢复目的页签，在**恢复到OSS Bucket**下拉框选择恢复到的指定OSS Bucket，在**恢复到Bucket Prefix**中指定恢复到某个prefix，如果不指定prefix则表示恢复到Bucket根目录。

    ![task](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4201129951/p77332.jpg)

5.  单击**创建**。

    恢复任务创建后，可以在恢复任务页签的**状态**栏查看恢复任务进度。


